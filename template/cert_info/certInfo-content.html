{{define "certInfo-content"}}
<div class="row">
  <div class="col">
    <div><ol class="breadcrumb">
      <li class="breadcrumb-item"><a href="#" hx-get="/overview" 
        hx-target="#main-content" 
        hx-swap="innerHTML" 
        hx-push-url="true">Overview</a></li>
      <li class="breadcrumb-item active" aria-current="page">Certificate Info</li>
    </ol></div>

    <!-- Форма загрузки сертификата на всю ширину -->
    <div class="row">
      <div class="col-12">
        <label class="form_lable">Certificate</label>
        <div class="input_border color-form-certs info-upload-container">
          <div id="drop-zone" class="info-drop-zone">
            <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="info-drop-zone-icon">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
              <polyline points="17 8 12 3 7 8"></polyline>
              <line x1="12" y1="3" x2="12" y2="15"></line>
            </svg>
            <p class="info-drop-zone-text">Drop cert for info</p>
            <p class="info-drop-zone-subtext">или кликните для выбора файла</p>
            
            <form id="cert-upload-form" 
              hx-post="/cert_info" 
              hx-target="#cert-details-container"
              hx-swap="innerHTML"
              hx-encoding="multipart/form-data"
              hx-on::after-request="
                if (event.detail.xhr.responseText) {
                  try {
                    const response = JSON.parse(event.detail.xhr.responseText);
                    if (response.status === 'error') {
                      Swal.fire({
                        showClass: { popup: 'animate__animated animate__fadeInUp animate__fast' },
                        hideClass: { popup: 'animate__animated animate__fadeOutDown animate__fast' },
                        customClass: 'custom-alert',
                        icon: 'error',
                        title: 'Error',
                        text: response.message,
                        confirmButtonColor: '#3085d6'
                      });
                    }
                  } catch (e) {
                    // Это не JSON, значит это HTML с информацией о сертификате
                    console.log('Certificate info loaded');
                  }
                }
              ">
              <input type="file" 
                id="cert-file-input" 
                name="certificate" 
                accept=".pem,.crt,.cer,.cert" 
                style="display: none;">
            </form>
          </div>
        </div>
      </div>
    </div>
    </div>

    <!-- Информация о сертификате - 3 колонки -->
    <div class="row mt-3" id="cert-details-container">
      <div class="col-12">
        <p style="text-align: center; color: #718096; padding: 40px 0;">
          Загрузите сертификат для просмотра информации
        </p>
      </div>
    </div>
  </div>
</div>
{{end}}

